(()=>{function m(...e){typeof window.URLSearchParams=="function"&&new URLSearchParams(window.location.search).get("debug-gtm")==="true"&&console.log(`ANALYTICS DEBUG MODE: ${e}`)}var E=0;function L(){window.dataLayer=window.dataLayer||[];let e=window.dataLayer.find(n=>n["gtm.start"]);if(e){if(!e["gtm.uniqueEventId"])return!1}else return!1;return!0}function y(){return new Promise(function(e,n){(function a(){if(L())return e();if(++E>9)return n();setTimeout(a,500)})()})}function u(e){return y().then(()=>{let n=[];Object.entries(e).forEach(([a,i])=>{n.push(`(${a}: ${i})`)}),m(`Sending "${n.join(", ")}"`),window.dataLayer.push(e)}).catch(()=>{e.eventCallback&&typeof e.eventCallback=="function"&&e.eventCallback()})}function d(e,n,a){let i=document.querySelectorAll(e);for(let l=0,g=i.length;l<g;l++)P(i[l],n,a)}function P(e,n,a){e?e.addEventListener(n,a):m(`${e} doesn't exist!`)}function C(e){let n=`${e} Interaction`,a={},i;function l(t){a[t]?i===t&&(a[t]=!a[t]):a[t]=!0,i=t}function g(t){let r=!1;return(t.classList.contains("o-expandable__expanding")||t.classList.contains("o-expandable__collapsing"))&&(r=!0),r}function b(t){let c="Page "+t.target.getAttribute("data-page");u({event:n,action:"Page link click",label:c})}function x(t){let r=t.currentTarget,s="Page "+document.querySelector(".form-explainer__page-link.current-page").getAttribute("data-page"),o="Next Page button clicked";r.classList.contains("prev")&&(o="Previous Page button clicked"),u({event:n,action:o,label:s})}function k(t){let r=t.currentTarget,c=r.parentNode,s=c.id;if(g(c))return;l(s);let o="Expandable collapsed",f=r.querySelector(".o-expandable__label").textContent.trim();a[s]===!0&&(o="Expandable expanded"),u({event:n,action:o,label:f})}function v(t){let r=t.target,c=r.getAttribute("href"),s=r.textContent.trim(),o="Image Overlay click - expandable collapsed",p=document.querySelector(c),f=p.id;g(p)||(l(f),a[f]===!0&&(o="Image Overlay click - expandable expanded"),u({event:n,action:o,label:s}))}d(".form-explainer__page-link","click",b),d(".form-explainer__page-buttons button","click",x),d(".o-expandable__header","mouseup",k),d(".image-map__overlay","click",v)}})();
//# sourceMappingURL=bah-explainers.js.map
