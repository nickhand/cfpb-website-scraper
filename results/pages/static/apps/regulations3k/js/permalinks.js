(()=>{var d,_=document.querySelector(".regulations3k #content__main"),h=document.querySelector(".o-regulations-wayfinder"),l=0;h!==null&&(l=h.scrollHeight+10);var g={appendixTitle:/Appendix [^\s]+/,title:/ยง 10[0-9].\.[0-9]*/g,marker:/-/g},m=()=>window.scrollY||window.pageYOffset,w=(t,e)=>t!==null&&t.match(e)!==null?t.match(e)[0]:"",y=t=>{let e=t.getBoundingClientRect().top;return m()+e-30},I=t=>{let e=[];for(let r=0;r<t.length;r++)e.push({id:t[r].id,position:y(t[r])});return e=Array.prototype.slice.apply(e).reverse(),e},P=(t,e)=>{let r=null;for(let n=0;n<e.length;n++)if(t>e[n].position){r=e[n].id;break}return r},k=()=>{let t=P(m()+l,d),e=t?`#${t}`:".";return window.history.replaceState(null,null,e)},L=t=>{let e,r,n,o="",a="",i=t.split("Interp");return i.length<2?"":(i!==null&&(o=i[0].split("-"),a=i[1].split("-")),o!==null&&(e=o[0],e.match(/[A-Z]/)?(e="app. "+o[0],r=""):(r=o.slice(1,-1).join(")("),r="("+r+")"),n=a.slice(1).join("."),n!==""&&(n="-"+n)),e+r+n)},M=(t,e)=>{let r,n;return e.indexOf("Comment for ")>-1||t.indexOf("Interp")>-1?(r="Comment ",n=L(t)):e.indexOf("Appendix ")===0?(r=w(e,g.appendixTitle),n=""):(r=w(e,g.title),t!==""&&(n="("+t.replace(g.marker,")(")+")")),{paragraphMarker:n,formattedTitle:r}},u=function(t,e,r){if(typeof e=="undefined"&&(e=h),typeof r=="undefined"&&(r=_),e!==null&&r!==null){let n,o,a,i=e.querySelector(".o-regulations-wayfinder__link"),f=P(m()+l,d);if(f){let c=document.getElementById(f).dataset.label,S=e.dataset.section;a=M(c,S),n=a.paragraphMarker,o=a.formattedTitle,r.classList.add("show-wayfinder"),e.style.top="0px",i.href="#"+f}else o="",n="",i.href="#",r.classList.remove("show-wayfinder"),e.style.top=-Math.abs(l)+"px";if(e.querySelector(".o-regulations-wayfinder__section-title").textContent=o,e.querySelector(".o-regulations-wayfinder__marker").textContent=n,t===!0&&window.location.hash.slice(1)!==""){let c=document.getElementById(window.location.hash.slice(1));c&&window.scrollTo(0,y(c)-l+30)}}},p=()=>{let t=document.querySelectorAll(".regdown-block"),e=[];for(let r=0;r<t.length;r++)t[r].closest("[hidden]")||e.push(t[r]);return d=I(e),d},s=(t,e,r)=>{let n;return window.addEventListener(t,()=>{window.clearTimeout(n),n=setTimeout(()=>{r()},e)},!1),n};var x=document.querySelector(".o-regulations-wayfinder__link"),q=()=>{p(),u(!0),x!==null&&x.addEventListener("click",t=>{t.preventDefault(),u(!0)}),s("resize",300,p),s("click",300,p),s("scroll",100,k),s("scroll",100,u)};"replaceState"in window.history&&window.addEventListener("load",q);})();
//# sourceMappingURL=permalinks.js.map
